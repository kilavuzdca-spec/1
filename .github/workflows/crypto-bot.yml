name: ğŸ¤– Crypto Trading Bot

on:
  schedule:
    # Her 10 dakikada bir Ã§alÄ±ÅŸsÄ±n
    - cron: '*/10 * * * *'
  
  # Manuel Ã§alÄ±ÅŸtÄ±rma iÃ§in
  workflow_dispatch:

env:
  PYTHON_VERSION: '3.11'
  BOT_TOKEN: ${{ secrets.BOT_TOKEN }}

jobs:
  crypto-scan:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    
    steps:
    - name: ğŸ›ï¸ KodlarÄ± Ä°ndir
      uses: actions/checkout@v4
      
    - name: ğŸ Python Kur
      uses: actions/setup-python@v4
      with:
        python-version: ${{ env.PYTHON_VERSION }}
        
    - name: ğŸ“¦ Gerekli Paketleri YÃ¼kle
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        
    - name: ğŸ” Crypto Analiz Ã‡alÄ±ÅŸtÄ±r
      run: python github_runner.py
        
    - name: ğŸ’¾ SonuÃ§larÄ± Kaydet
      uses: actions/upload-artifact@v4
      with:
        name: crypto-scan-results
        path: |
          ultrafilter_results.txt
          tara_results.txt
        retention-days: 7
        
    - name: ğŸ“Š SonuÃ§larÄ± GÃ¶ster
      run: |
        echo "=== ULTRA FILTER SONUÃ‡LARI ==="
        if [ -f ultrafilter_results.txt ]; then
          head -20 ultrafilter_results.txt
        else
          echo "âŒ SonuÃ§ dosyasÄ± bulunamadÄ±"
        fi
        echo ""
        echo "=== TARA SONUÃ‡LARI ==="
        if [ -f tara_results.txt ]; then
          cat tara_results.txt
        else
          echo "âŒ Tara dosyasÄ± bulunamadÄ±"
        fi
